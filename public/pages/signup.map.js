{"version":3,"sources":["webpack:///./client/pages/signup/index.jsx","webpack:///./client/components/alert.jsx?8dc6**","webpack:///./client/pages/signup/form.jsx","webpack:///./client/pages/signup/actions.js","webpack:///./client/pages/signup/constants.js","webpack:///./client/pages/signup/store.js"],"names":["Form","require","React","ReactDOM","Page","mainElement","render","window","document","getElementById","module","exports","parent","page","blastoff","propTypes","type","PropTypes","oneOf","onClose","func","message","string","Alert","close","props","Component","Actions","Button","ControlGroup","Spinner","Store","TextControl","input","state","getState","unsubscribeStore","subscribe","onStoreChange","bind","name","focus","setState","event","preventDefault","stopPropagation","sendRequest","value","username","password","email","alert","success","error","formElements","c","hasError","help","loading","handleSubmit","ApiActions","Constants","data","post","REGISTER","REGISTER_RESPONSE","err","response","location","href","FluxConstant","set","ObjectAssign","ParseValidation","Redux","initialState","undefined","reducer","action","validation","createStore"],"mappings":"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","file":"signup.min.js","sourcesContent":["/* global window */\r\n'use strict';\r\nconst Form = require('./form.jsx');\r\nconst React = require('react');\r\nconst ReactDOM = require('react-dom');\r\n\r\n\r\nclass Page {\r\n    static blastoff() {\r\n\r\n        this.mainElement = ReactDOM.render(\r\n            <Form />,\r\n            window.document.getElementById('app-mount')\r\n        );\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = Page;\r\n\r\n\r\n/* $lab:coverage:off$ */\r\nif (!module.parent) {\r\n    window.page = Page;\r\n    Page.blastoff();\r\n}\r\n/* $lab:coverage:on$ */\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/index.jsx","'use strict';\r\nconst React = require('react');\r\n\r\n\r\nconst propTypes = {\r\n    type: React.PropTypes.oneOf(['success', 'info', 'warning', 'danger']),\r\n    onClose: React.PropTypes.func,\r\n    message: React.PropTypes.string\r\n};\r\n\r\n\r\nclass Alert extends React.Component {\r\n    render() {\r\n\r\n        let close;\r\n\r\n        if (this.props.onClose) {\r\n            close = <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                onClick={this.props.onClose}>\r\n\r\n                &times;\r\n            </button>;\r\n        }\r\n\r\n        return (\r\n            <div className={`alert alert-${this.props.type}`}>\r\n                {close}\r\n                {this.props.message}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nAlert.propTypes = propTypes;\r\n\r\n\r\nmodule.exports = Alert;\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/alert.jsx","'use strict';\r\nconst Actions = require('./actions');\r\nconst Alert = require('../../components/alert.jsx');\r\nconst Button = require('../../components/form/button.jsx');\r\nconst ControlGroup = require('../../components/form/control-group.jsx');\r\nconst React = require('react');\r\nconst Spinner = require('../../components/form/spinner.jsx');\r\nconst Store = require('./store');\r\nconst TextControl = require('../../components/form/text-control.jsx');\r\n\r\n\r\nclass Form extends React.Component {\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.input = {};\r\n        this.state = Store.getState();\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.unsubscribeStore = Store.subscribe(this.onStoreChange.bind(this));\r\n\r\n        if (this.input.name) {\r\n            this.input.name.focus();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n\r\n        this.unsubscribeStore();\r\n    }\r\n\r\n    onStoreChange() {\r\n\r\n        this.setState(Store.getState());\r\n    }\r\n\r\n    handleSubmit(event) {\r\n\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        Actions.sendRequest({\r\n            name: this.input.name.value(),\r\n            username: this.input.username.value(),\r\n            password: this.input.password.value(),\r\n            email: this.input.email.value()\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        let alert = [];\r\n\r\n        if (this.state.success) {\r\n            alert = <Alert\r\n                type=\"success\"\r\n                message=\"Success. Redirecting...\"\r\n            />;\r\n        }\r\n        else if (this.state.error) {\r\n            alert = <Alert\r\n                type=\"danger\"\r\n                message={this.state.error}\r\n            />;\r\n        }\r\n\r\n        let formElements;\r\n\r\n        if (!this.state.success) {\r\n            formElements = <fieldset>\r\n                <TextControl\r\n                    ref={(c) => (this.input.name = c)}\r\n                    name=\"name\"\r\n                    label=\"Name\"\r\n                    hasError={this.state.hasError.name}\r\n                    help={this.state.help.name}\r\n                    disabled={this.state.loading}\r\n                />\r\n                <TextControl\r\n                    ref={(c) => (this.input.email = c)}\r\n                    name=\"email\"\r\n                    label=\"Email\"\r\n                    hasError={this.state.hasError.email}\r\n                    help={this.state.help.email}\r\n                    disabled={this.state.loading}\r\n                />\r\n                <TextControl\r\n                    ref={(c) => (this.input.username = c)}\r\n                    name=\"username\"\r\n                    label=\"Username\"\r\n                    hasError={this.state.hasError.username}\r\n                    help={this.state.help.username}\r\n                    disabled={this.state.loading}\r\n                />\r\n                <TextControl\r\n                    ref={(c) => (this.input.password = c)}\r\n                    name=\"password\"\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    hasError={this.state.hasError.password}\r\n                    help={this.state.help.password}\r\n                    disabled={this.state.loading}\r\n                />\r\n                <ControlGroup hideLabel={true} hideHelp={true}>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        inputClasses={{ 'btn-primary': true }}\r\n                        disabled={this.state.loading}>\r\n\r\n                        Create my account\r\n                        <Spinner space=\"left\" show={this.state.loading} />\r\n                    </Button>\r\n                </ControlGroup>\r\n            </fieldset>;\r\n        }\r\n\r\n        return (\r\n            <section>\r\n                <h1 className=\"page-header\">Sign up</h1>\r\n                <form onSubmit={this.handleSubmit.bind(this)}>\r\n                    {alert}\r\n                    {formElements}\r\n                </form>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = Form;\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/form.jsx","/* global window */\r\n'use strict';\r\nconst ApiActions = require('../../actions/api');\r\nconst Constants = require('./constants');\r\nconst Store = require('./store');\r\n\r\n\r\nclass Actions {\r\n    static sendRequest(data) {\r\n\r\n        ApiActions.post(\r\n            '/api/signup',\r\n            data,\r\n            Store,\r\n            Constants.REGISTER,\r\n            Constants.REGISTER_RESPONSE,\r\n            (err, response) => {\r\n\r\n                if (!err) {\r\n                    window.location.href = '/account';\r\n                }\r\n            }\r\n        );\r\n    }\r\n};\r\n\r\n\r\nmodule.exports = Actions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/actions.js","'use strict';\r\nconst FluxConstant = require('flux-constant');\r\n\r\n\r\nmodule.exports = FluxConstant.set([\r\n    'REGISTER',\r\n    'REGISTER_RESPONSE'\r\n]);\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/constants.js","'use strict';\r\nconst Constants = require('./constants');\r\nconst ObjectAssign = require('object-assign');\r\nconst ParseValidation = require('../../helpers/parse-validation');\r\nconst Redux = require('redux');\r\n\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    success: false,\r\n    error: undefined,\r\n    hasError: {},\r\n    help: {}\r\n};\r\nconst reducer = function (state = initialState, action) {\r\n\r\n    if (action.type === Constants.REGISTER) {\r\n        return ObjectAssign({}, state, {\r\n            loading: true\r\n        });\r\n    }\r\n\r\n    if (action.type === Constants.REGISTER_RESPONSE) {\r\n        const validation = ParseValidation(action.response);\r\n\r\n        return ObjectAssign({}, state, {\r\n            loading: false,\r\n            success: !action.err,\r\n            error: validation.error,\r\n            hasError: validation.hasError,\r\n            help: validation.help\r\n        });\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\n\r\nmodule.exports = Redux.createStore(reducer);\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/store.js"],"sourceRoot":""}