{"version":3,"sources":["webpack:///./client/pages/signup/index.jsx","webpack:///./client/components/alert.jsx?8dc6**","webpack:///./client/pages/signup/form.jsx","webpack:///./client/pages/signup/actions.js","webpack:///./client/pages/signup/constants.js","webpack:///./client/pages/signup/store.js"],"names":["Form","require","React","ReactDOM","Page","mainElement","render","window","document","getElementById","module","exports","parent","page","blastoff","propTypes","type","PropTypes","oneOf","onClose","func","message","string","Alert","close","props","Component","Actions","Button","ControlGroup","Spinner","Store","TextControl","input","state","getState","unsubscribeStore","subscribe","onStoreChange","bind","name","focus","setState","event","preventDefault","stopPropagation","sendRequest","value","username","password","email","utype","alert","success","error","formElements","c","hasError","help","loading","handleSubmit","ApiActions","Constants","data","post","REGISTER","REGISTER_RESPONSE","err","response","location","href","FluxConstant","set","ObjectAssign","ParseValidation","Redux","initialState","undefined","reducer","action","validation","createStore"],"mappings":"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","file":"signup.min.js","sourcesContent":["/* global window */\n'use strict';\nconst Form = require('./form.jsx');\nconst React = require('react');\nconst ReactDOM = require('react-dom');\n\n\nclass Page {\n    static blastoff() {\n\n        this.mainElement = ReactDOM.render(\n            <Form />,\n            window.document.getElementById('app-mount')\n        );\n    }\n}\n\n\nmodule.exports = Page;\n\n\n/* $lab:coverage:off$ */\nif (!module.parent) {\n    window.page = Page;\n    Page.blastoff();\n}\n/* $lab:coverage:on$ */\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/index.jsx","'use strict';\nconst React = require('react');\n\n\nconst propTypes = {\n    type: React.PropTypes.oneOf(['success', 'info', 'warning', 'danger']),\n    onClose: React.PropTypes.func,\n    message: React.PropTypes.string\n};\n\n\nclass Alert extends React.Component {\n    render() {\n\n        let close;\n\n        if (this.props.onClose) {\n            close = <button\n                type=\"button\"\n                className=\"close\"\n                onClick={this.props.onClose}>\n\n                &times;\n            </button>;\n        }\n\n        return (\n            <div className={`alert alert-${this.props.type}`}>\n                {close}\n                {this.props.message}\n            </div>\n        );\n    }\n}\n\nAlert.propTypes = propTypes;\n\n\nmodule.exports = Alert;\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/alert.jsx","'use strict';\nconst Actions = require('./actions');\nconst Alert = require('../../components/alert.jsx');\nconst Button = require('../../components/form/button.jsx');\nconst ControlGroup = require('../../components/form/control-group.jsx');\nconst React = require('react');\nconst Spinner = require('../../components/form/spinner.jsx');\nconst Store = require('./store');\nconst TextControl = require('../../components/form/text-control.jsx');\n\n\nclass Form extends React.Component {\n    constructor(props) {\n\n        super(props);\n\n        this.input = {};\n        this.state = Store.getState();\n    }\n\n    componentDidMount() {\n\n        this.unsubscribeStore = Store.subscribe(this.onStoreChange.bind(this));\n\n        if (this.input.name) {\n            this.input.name.focus();\n        }\n    }\n\n    componentWillUnmount() {\n\n        this.unsubscribeStore();\n    }\n\n    onStoreChange() {\n\n        this.setState(Store.getState());\n    }\n\n    handleSubmit(event) {\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        Actions.sendRequest({\n            name: this.input.name.value(),\n            username: this.input.username.value(),\n            password: this.input.password.value(),\n            email: this.input.email.value(),\n            utype: this.input.utype.value()\n        });\n    }\n\n    render() {\n\n        let alert = [];\n\n        if (this.state.success) {\n            alert = <Alert\n                type=\"success\"\n                message=\"Success. Redirecting...\"\n            />;\n        }\n        else if (this.state.error) {\n            alert = <Alert\n                type=\"danger\"\n                message={this.state.error}\n            />;\n        }\n\n        let formElements;\n\n        if (!this.state.success) {\n            formElements = <fieldset>\n                <TextControl\n                    ref={(c) => (this.input.name = c)}\n                    name=\"name\"\n                    label=\"Name\"\n                    hasError={this.state.hasError.name}\n                    help={this.state.help.name}\n                    disabled={this.state.loading}\n                />\n                <TextControl\n                    ref={(c) => (this.input.email = c)}\n                    name=\"email\"\n                    label=\"Email\"\n                    hasError={this.state.hasError.email}\n                    help={this.state.help.email}\n                    disabled={this.state.loading}\n                />\n                <TextControl\n                    ref={(c) => (this.input.username = c)}\n                    name=\"username\"\n                    label=\"Username\"\n                    hasError={this.state.hasError.username}\n                    help={this.state.help.username}\n                    disabled={this.state.loading}\n                />\n                <TextControl\n                    ref={(c) => (this.input.password = c)}\n                    name=\"password\"\n                    label=\"Password\"\n                    type=\"password\"\n                    hasError={this.state.hasError.password}\n                    help={this.state.help.password}\n                    disabled={this.state.loading}\n                />\n                <TextControl\n                    ref={(c) => (this.input.utype = c)}\n                    name=\"utype\"\n                    label=\"Type (Parent, Teacher, Student)\"\n                    hasError={this.state.hasError.utype}\n                    help={this.state.help.utype}\n                    disabled={this.state.loading}\n                />\n                <ControlGroup hideLabel={true} hideHelp={true}>\n                    <Button\n                        type=\"submit\"\n                        inputClasses={{ 'btn-primary': true }}\n                        disabled={this.state.loading}>\n\n                        Create my account\n                        <Spinner space=\"left\" show={this.state.loading} />\n                    </Button>\n                </ControlGroup>\n            </fieldset>;\n        }\n\n        return (\n            <section>\n                <h1 className=\"page-header\">Sign up</h1>\n                <form onSubmit={this.handleSubmit.bind(this)}>\n                    {alert}\n                    {formElements}\n                </form>\n            </section>\n        );\n    }\n}\n\n\nmodule.exports = Form;\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/form.jsx","/* global window */\n'use strict';\nconst ApiActions = require('../../actions/api');\nconst Constants = require('./constants');\nconst Store = require('./store');\n\n\nclass Actions {\n    static sendRequest(data) {\n\n        ApiActions.post(\n            '/api/signup',\n            data,\n            Store,\n            Constants.REGISTER,\n            Constants.REGISTER_RESPONSE,\n            (err, response) => {\n\n                if (!err) {\n                    window.location.href = '/account';\n                }\n            }\n        );\n    }\n};\n\n\nmodule.exports = Actions;\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/actions.js","'use strict';\nconst FluxConstant = require('flux-constant');\n\n\nmodule.exports = FluxConstant.set([\n    'REGISTER',\n    'REGISTER_RESPONSE'\n]);\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/constants.js","'use strict';\nconst Constants = require('./constants');\nconst ObjectAssign = require('object-assign');\nconst ParseValidation = require('../../helpers/parse-validation');\nconst Redux = require('redux');\n\n\nconst initialState = {\n    loading: false,\n    success: false,\n    error: undefined,\n    hasError: {},\n    help: {}\n};\nconst reducer = function (state = initialState, action) {\n\n    if (action.type === Constants.REGISTER) {\n        return ObjectAssign({}, state, {\n            loading: true\n        });\n    }\n\n    if (action.type === Constants.REGISTER_RESPONSE) {\n        const validation = ParseValidation(action.response);\n\n        return ObjectAssign({}, state, {\n            loading: false,\n            success: !action.err,\n            error: validation.error,\n            hasError: validation.hasError,\n            help: validation.help\n        });\n    }\n\n    return state;\n};\n\n\nmodule.exports = Redux.createStore(reducer);\n\n\n\n// WEBPACK FOOTER //\n// ./client/pages/signup/store.js"],"sourceRoot":""}